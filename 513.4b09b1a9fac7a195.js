"use strict";(self.webpackChunktool_box=self.webpackChunktool_box||[]).push([[513],{57513:(O,C,r)=>{r.r(C),r.d(C,{SpinningWheelComponent:()=>R});var t=r(54438),M=r(40882),x=r(99631),u=r(89417),w=r(73301),p=r(75351);function b(a,h){if(1&a&&(t.j41(0,"button",6),t.EFF(1),t.k0s()),2&a){const n=t.XpG();t.R7$(),t.JRh(n.data.textClose)}}function S(a,h){if(1&a&&(t.j41(0,"button",7),t.EFF(1),t.k0s()),2&a){const n=t.XpG();t.Y8G("mat-dialog-close",!0),t.R7$(),t.JRh(n.data.textOk)}}let V=(()=>{class a{constructor(){this.data=(0,t.WQX)(p.Vh)}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-dialog"]],standalone:!0,features:[t.aNF],decls:10,vars:4,consts:[[1,"dialog"],["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-button","","mat-dialog-close","",4,"ngIf"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close",4,"ngIf"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,s){1&e&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2),t.k0s(),t.nrm(3,"hr"),t.j41(4,"mat-dialog-content",2)(5,"h1"),t.EFF(6),t.k0s()(),t.j41(7,"mat-dialog-actions",3),t.DNE(8,b,2,1,"button",4)(9,S,2,2,"button",5),t.k0s()()),2&e&&(t.R7$(2),t.JRh(s.data.title),t.R7$(4),t.JRh(s.data.message),t.R7$(2),t.Y8G("ngIf",s.data.textClose),t.R7$(),t.Y8G("ngIf",s.data.textOk))},dependencies:[p.Yi,p.E7,p.tx],styles:[".dialog[_ngcontent-%COMP%]{min-width:20vw}.dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;padding:10px;margin:0}.dialog[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{color:#fff;margin:0}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-weight:700}"]})}}return a})();class F{static assign(h){if(h)return Object.assign({},h)}static assigns(h){let n=[];return h.forEach(e=>n.push(this.assign(e))),n}}class v extends F{constructor(){super(),this.title="",this.message="",this.textCancel="",this.textOk=""}static assign(h){if(h)return Object.assign(new v,h)}}var I=r(67376);const P=["canvas"];let R=(()=>{class a{constructor(){this.values=[],this.selectedValue=null,this.inputValues="",this.dialog=(0,t.WQX)(p.bZ),this.startAngle=0,this.spinAngle=0,this.isSpinning=!1,this.colors=["#3369e8","#d50f25","#eeb211","#009925"]}ngOnInit(){this.values=["Anne","Ben","Camile","Dick"],this.inputValues=this.values.join("\n")}ngAfterViewInit(){this.context=this.canvasRef.nativeElement.getContext("2d"),this.drawWheel()}onValuesChanged(){this.values=(this.inputValues.split(/\r?\n|\r|\n/g)||[]).filter(n=>n),this.drawWheel()}drawWheel(){const n=this.canvasRef.nativeElement,e=this.context,i=2*Math.PI/this.values.length,c=n.width/2-2,o=n.height/2-2,l=n.width/2-2;e.clearRect(0,0,n.width,n.height),this.values.forEach((d,g)=>{const m=this.startAngle+g*i,f=m+i;e.beginPath(),e.moveTo(c,o),e.arc(c,o,l,m,f),e.fillStyle=this.colors[g%4==0&&g>=4&&g===this.values.length-1?1:g%4],e.fill(),e.stroke(),e.save(),e.translate(c,o),e.rotate(m+i/2),e.textAlign="right",e.fillStyle="#fff",e.font="16px Arial",e.fillText(d,l-10,10),e.restore()}),this.drawStaticTriangle()}spin(){if(this.isSpinning||!(0,I.size)(this.values))return;this.isSpinning=!0;const e=360*Math.random()+3600;let i,s=0;const o=l=>{i||(i=l);const g=Math.min((l-i)/5e3,1),m=(l=>l<.5?4*l*l*l:1-Math.pow(-2*l+2,3)/2)(g),f=e*m,A=f-s;s=f,this.startAngle=(this.startAngle+A*Math.PI/180)%(2*Math.PI),this.drawWheel(),g<1?requestAnimationFrame(o):(this.isSpinning=!1,this.determineSelectedValue(this.startAngle))};requestAnimationFrame(o)}drawStaticTriangle(){const n=this.canvasRef.nativeElement,e=this.context,l=n.width/2+n.width/2-15,d=n.height/2;e.fillStyle="white",e.beginPath(),e.moveTo(l,d),e.lineTo(l+30,d-15),e.lineTo(l+30,d+15),e.closePath(),e.fill()}determineSelectedValue(n){const e=this.values.length,s=2*Math.PI/e,i=Math.floor((2*Math.PI-n)/s)%e;this.selectedValue=this.values[i];const c=new v;c.title="The chosen one is",c.message=this.selectedValue,this.dialog.open(V,{data:c})}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-spinning-wheel"]],viewQuery:function(e,s){if(1&e&&t.GBs(P,5),2&e){let i;t.mGM(i=t.lsd())&&(s.canvasRef=i.first)}},standalone:!0,features:[t.aNF],decls:10,vars:2,consts:[["canvas",""],["header","Spinning wheel","description","Spinning wheel"],[1,"row"],[1,"col-lg-8","col-md-12","col-sm-12","wheel-container"],["id","wheel","width","600","height","600",3,"click"],[1,"col-lg-4","col-md-12","col-sm-12"],["for","entries"],[1,"w-100"],["matInput","","id","entries","rows","25",3,"ngModelChange","ngModel","disabled"]],template:function(e,s){if(1&e){const i=t.RV6();t.nrm(0,"app-page-header",1),t.j41(1,"div",2)(2,"div",3)(3,"canvas",4,0),t.bIt("click",function(){return t.eBV(i),t.Njj(s.spin())}),t.k0s()(),t.j41(5,"div",5)(6,"label",6),t.EFF(7,"Entries:"),t.k0s(),t.j41(8,"mat-form-field",7)(9,"textarea",8),t.mxI("ngModelChange",function(o){return t.eBV(i),t.DH7(s.inputValues,o)||(s.inputValues=o),t.Njj(o)}),t.bIt("ngModelChange",function(){return t.eBV(i),t.Njj(s.onValuesChanged())}),t.k0s()()()()}2&e&&(t.R7$(9),t.R50("ngModel",s.inputValues),t.Y8G("disabled",s.isSpinning))},dependencies:[M.rl,x.fg,u.X1,u.me,u.BC,u.YN,u.vS,w.y],styles:[".wheel-container[_ngcontent-%COMP%]{text-align:center;margin-top:20px}canvas[_ngcontent-%COMP%]{border-radius:50%;margin-bottom:20px}button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#28a745;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px}button[_ngcontent-%COMP%]:disabled{background-color:#ccc}"]})}}return a})()}}]);